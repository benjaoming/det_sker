
<%= simple_form_for @event, html: { class: 'form-horizontal' }, defaults: {
                            wrapper_html: { class: 'form-group' }, input_html: { class: 'form-control' } } do |f| %>
    
    <div class="row">
      <div class="col-xs-12">
        <%= f.input :title %>
      </div>
      </div>
      <% if @event.persisted? %>
      <div class="row">
          <div class="col-xs-12">
            <%= f.input :cancelled, wrapper_html: { class: 'checkbox' },
                        input_html: { class: 'checkbox'}, label_html: { class: 'override'} %>
          </div>
      </div>
      <% end %>
    <div class="row">
      <div class="col-xs-12">
        <%= f.input :short_description, maxlength: 200 %>
      </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-5">
            <%= f.association :categories, label_method: :key, input_html: {
                    id: 'event-category-dummy',
                    class: 'combobox category-combobox', data: { target: 'selected-categories'}
            } %>
          <span id="new-category-box">
            <% @event.categories.each do |cat| %>
              <%= category_tag(cat.id, cat.key) %>
            <% end %>
          </span>
          <div data-role="selected-categories"></div>
          <input name="event[category_ids][]" id="category-ids" class="hidden" value=""/>
        </div>
        <div class="col-xs-12 col-sm-5 col-sm-offset-1">
            <%= f.association :location, collection: Location.all.sort,
                              label_method: :display_name,
                              input_html: { class: 'combobox location-combobox' }
            %>
          <span id="new-location-box"></span>
        </div>
    </div>


    <div class="row">
        <div class="col-xs-12 col-sm-5">
          <%= f.input :start_time, as: :string, input_html: { data:{
                  function: 'datetime-picker', 'date-format' => 'DD/MM/YYYY HH:mm' }} %>
        </div>
        <div class="col-xs-12 col-sm-5 col-sm-offset-1">
        <%= f.input :end_time, as: :string, input_html: { data: {
                function: 'datetime-picker', 'date-format' => 'DD/MM/YYYY HH:mm' }} %>
        </div>
    </div>
    <%# event price field should only be shown a) if there is already a price
    or b) if the user has checked this box to say that there is a price
    Note the javascript hooks on the data elements. %>
    <% if @event.price.blank? %>
    <div class="input boolean optional event_price_enabled checkbox">
      <label class="boolean optional control-label override checkbox" for="event_price_enabled">
        <input class="boolean optional checkbox" id="event_price_enabled"
               name="event[price_enabled]" value="1" type="checkbox"
               data-function="show" data-target=".event_price" data-hide=".event_price_enabled">
        <%= t '.enable_price' %>
      </label>
    </div>
    <% end %>
    <div class="row">
      <div class="col-xs-12">
        <% is_visible =  @event.price.present? ? ' ' : 'hidden' %>
        <%= f.input :price, wrapper_html: { class: is_visible } %>
      </div>
    </div>
  <br/>
    <div class="row">
      <div class="col-xs-12">
        <%= f.button :submit, class: 'btn btn-primary' %>
      </div>
    </div>
  <br/>
<% end %>
<%= render partial: 'layouts/modal_wrapper' %>
